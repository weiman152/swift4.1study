//
//  main.swift
//  swift10
//
//  Created by iOS on 2018/9/29.
//  Copyright Â© 2018å¹´ weiman. All rights reserved.
//

import Foundation

// å‡½æ•°
/*
 å­¦è¿‡ä»»ä½•ä¸€é—¨è¯­è¨€çš„å°ä¼™ä¼´ä»¬å¯¹å‡½æ•°éƒ½ä¼šæ„Ÿåˆ°ä¸é™Œç”Ÿã€‚
 Appleå®˜æ–¹å°†swiftä¸­çš„å‡½æ•°å®šä¹‰ä¸ºï¼š æ‰§è¡Œä¸€ä¸ªç‰¹å®šä»»åŠ¡çš„ï¼Œè‡ªåŒ…å«çš„ä»£ç å—ã€‚
 */

// 1. å‡½æ•°çš„å®šä¹‰å’Œè°ƒç”¨
/*
 func å‡½æ•°å(å‚æ•°1ï¼Œå‚æ•°2ï¼Œ...) -> è¿”å›žå€¼ {
     å‡½æ•°ä½“
 }
æ³¨æ„ï¼š å¦‚æžœæ²¡æœ‰è¿”å›žå€¼ï¼Œ â€œ->è¿”å›žå€¼â€ å¯ä»¥çœç•¥
 */

do {
    //æ— å‚æ•°ã€æ— è¿”å›žå€¼çš„å‡½æ•°
    func hello() {
        print("ä½ å¥½")
    }
    
    //æ— å‚æ•°ï¼Œæœ‰è¿”å›žå€¼çš„å‡½æ•°
    func helloWorld() -> String {
        return "ä½ å¥½å•Š, å˜ˆæ‚çš„ä¸–ç•Œ"
    }
    
    //æœ‰å‚æ•°ï¼Œæ— è¿”å›žå€¼çš„å‡½æ•°
    func hello(name: String) {
        print("ä½ å¥½ï¼Œ \(name)")
    }
    
    // æœ‰å‚æ•°ï¼Œæœ‰è¿”å›žå€¼çš„å‡½æ•°
    func helloWorld(name: String) -> String {
        return "ä½ å¥½ï¼Œ \(name)"
    }
    
    //å‡½æ•°è°ƒç”¨
    hello()
    hello(name: "å¤ªé˜³")
    let a = helloWorld()
    print(a)
    let b = helloWorld(name: "æœˆäº®")
    print(b)
}

do {
    func add(a1: [Int], a2: [Int]) -> [Int] {
        return a1 + a2
    }
    
    let a = add(a1: [1, 2, 3], a2: [4, 5, 6])
    print(a)
    
    // æ±‚æ•°ç»„ä¸­çš„æœ€å¤§å€¼å’Œæœ€å°å€¼
    func maxAndMin(a: [Int]) -> (max: Int, min: Int) {
        
        var max = a[0]
        var min = a[0]
        for i in a {
            if i > max { max = i }
            if i < min { min = i }
        }
        return (max, min)
    }
    
    let value = maxAndMin(a: [8,3,5,3,2,5,78,4,3,2,3,45,43,333,65,456,886,3433,33,44,56])
    print("max: \(value.max), min: \(value.min)")
}

// 2. å‡½æ•°çš„å®žå‚æ ‡ç­¾
/*
 æ¯ä¸ªå‡½æ•°å¦åŒ…å«ä¸€ä¸ªå®žå‚æ ‡ç­¾å’Œä¸€ä¸ªå½¢å‚åã€‚
 æ³¨æ„ï¼š
 1. å®žå‚æ ‡ç­¾å¯ä»¥çœç•¥ï¼Œä½†æ˜¯å½¢å‚åä¸èƒ½çœç•¥ï¼›
 2. å®žå‚æ ‡ç­¾å¯ä»¥ç›¸åŒï¼Œå½¢å‚åä¸èƒ½ç›¸åŒï¼›
 */
do {
    func myFunc(firstName name: String, secondName name2: String) -> String {
        let str = name + "Â·" + name2
        return str
    }
    
    // è°ƒç”¨
    let name = myFunc(firstName: "è¿ˆå…‹å°”", secondName: "æ°å…‹é€Š")
    print(name)
}

// 3. é»˜è®¤å½¢å‚å€¼
/*
 swiftç¼–ç¨‹è¯­è¨€å¯ä»¥å¯¹å‡½æ•°å½¢å‚è®¾ç½®ä¸€ä¸ªé»˜è®¤å€¼ã€‚å¦‚æžœä¸€ä¸ªå½¢å‚å…·æœ‰ä¸€ä¸ªé»˜è®¤å€¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨è°ƒç”¨
 è¿™ä¸ªå‡½æ•°çš„æ—¶å€™å¯ä»¥æ— éœ€å¯¹æ­¤å‚æ•°ä¼ é€’å®žå‚ï¼Œä¹Ÿå°±æ˜¯è¯´å¸¦æœ‰é»˜è®¤å€¼çš„å½¢å‚æ‰€å¯¹åº”çš„å®žå‚å¯ä»¥ç¼ºçœã€‚
 */

do {
    func hello(name: String = "wrold") {
        print("hello, \(name)")
    }
    
    //è°ƒç”¨
    hello()
    hello(name: "ðŸ‡¨ðŸ‡³")
    
    /*
     æ‰“å°ï¼š
     hello, wrold
     hello, ðŸ‡¨ðŸ‡³
     */
    
    /*
     æ³¨æ„ï¼š
     swiftçš„é»˜è®¤å‚æ•°ä¸ŽC++ç›¸æ¯”æ›´åŠ çš„çµæ´»ï¼Œå› ä¸ºå®ƒä¸ä»…ä»…å¯ä»¥æ”¾åœ¨æœ€åŽï¼Œè¿˜å¯ä»¥æ”¾åœ¨å‚æ•°åˆ—è¡¨çš„ä»»ä½•ä½ç½®ã€‚
     */
    
    func myHello(name: String, years: String = "2018", ages: Int) {
        print("hello, \(name), ä»Šå¹´æ˜¯\(years)å¹´, æˆ‘å·²ç»ç¼–ç¨‹\(ages)å¹´äº†")
    }
    
    myHello(name: "æ°å…‹", ages: 10)
    myHello(name: "å°åœŸè±†", years: "2020", ages: 5)
}

// 4. ä¸å®šä¸ªæ•°çš„å½¢å‚
/*
 swiftè¯­è¨€å’ŒCè¯­è¨€ä¸€æ ·ï¼Œæ”¯æŒä¸å®šä¸ªæ•°çš„å½¢å‚ã€‚
 å½“æˆ‘ä»¬ä½¿ç”¨ä¸å®šä¸ªæ•°çš„å½¢å‚æ—¶ï¼Œå¯ä»¥å°†å®ƒè§†ä½œä¸ºå®ƒæ‰€æŒ‡å®šç±»åž‹çš„é¢æ•°ç»„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡countå±žæ€§èŽ·å–å®žå‚æ‰€
 ä¼ é€’è¿‡æ¥çš„å‚æ•°ä¸ªæ•°ï¼›é€šè¿‡ä¸‹æ ‡æ“ä½œç¬¦æ¥èŽ·å–å¯¹åº”çš„å®žå‚å€¼ã€‚
 */
do {
    func foo(a: Int, b: Int...) {
        var sum = a
        if b.count > 0 {
            for i in b {
                sum += i
            }
        }
        print("sum = \(sum)")
    }
    
    foo(a: 0)
    foo(a: 0, b: 1)
    foo(a: 0, b: 1, 2, 3, 4, 5)
    
    func boo(a: Int..., b: Int = -1) {
        if a.count > 0 {
            print("value = \(a[0] + a[1])")
        } else {
            print("value = \(b)")
        }
    }
    
    boo()
    boo(a: 1, 2, 3)
    boo(a: 1, 2, 3, 4, b: 10)
    boo(b: 100)
}

// 5. è¾“å…¥è¾“å‡ºå½¢å‚(inout)
/*
 åœ¨swiftè¯­è¨€ä¸­ï¼Œæ‰€æœ‰çš„å½¢å‚é»˜è®¤éƒ½æ˜¯å¸¸é‡ã€‚å› æ­¤æˆ‘ä»¬åœ¨å‡½æ•°ä½“å†…å¦‚æžœå¯¹ä¸€ä¸ªæ™®é€šçš„å½¢å‚ä¿®æ”¹å…¶å€¼ï¼Œé‚£ä¹ˆ
 å°±ä¼šå¼•å‘ç¼–è¯‘æŠ¥é”™ã€‚
 swiftå¼•å…¥äº†ä¸€ç§è¾“å…¥è¾“å‡ºå½¢å‚ï¼Œä½¿å¾—è¯¥å½¢å‚çš„å€¼ä¸ä»…èƒ½è¢«ä¿®æ”¹ï¼Œè€Œä¸”è¿˜èƒ½å½±å“å®ƒæ‰€å¯¹åº”çš„å®žå‚å€¼ã€‚
 //å®žçŽ°æ­¥éª¤
 1. å½“å‡½æ•°åœ¨è°ƒç”¨å‰ï¼Œå…ˆå°†å®žå‚çš„å€¼æ‹·è´åˆ°æ‰€å¯¹åº”çš„è¾“å…¥è¾“å‡ºå½¢å‚ä¸­ã€‚
 2. åœ¨æ‰§è¡Œå‡½æ•°ä¸­çš„ä»£ç æ—¶ï¼Œå¯¹è¾“å…¥è¾“å‡ºå½¢å‚çš„å€¼è¿›è¡Œä¿®æ”¹ã€‚
 3. åœ¨å‡½æ•°è¿”å›žä¹‹åŽï¼Œå°†ä¿®æ”¹åŽè¾“å…¥è¾“å‡ºå½¢å‚çš„å€¼æ‹·è´å›žå¯¹åº”çš„å®žå‚ä¸­ã€‚
 */

do {
    func foo(a: Int, b: inout Int) {
        b += a
    }
    
    var x = 100
    
    foo(a: 10, b: &x)
    print("x = \(x)")
    // è¾“å‡ºï¼š x = 110 ï¼Œ åœ¨å‡½æ•°å†…éƒ¨ï¼Œb = 110ï¼Œ å‡½æ•°å¤–éƒ¨çš„å‚æ•°xä¹Ÿè·Ÿç€æ”¹å˜äº†ï¼Œè¿™å°±æ˜¯ inoutçš„ä½œç”¨
    
    var array = [1, 2, 3]

    foo(a: array[0], b: &array[2])
    print("array: \(array)")
    // ç»“æžœï¼š array: [1, 2, 4]
    
    func boo(t: inout (Double, Double)) {
        t.0 *= 0.5
        t.1 *= 0.5
    }
    
    var point = (10.0, 20.0)
    boo(t: &point)
    print("point: \(point)")
}

// 6. å‡½æ•°é‡è½½
/*
 swift è¯­è¨€è·ŸC++ ä¸€æ ·ï¼Œé»˜è®¤æ”¯æŒå‡½æ•°é‡è½½ã€‚
 ä»€ä¹ˆæ˜¯å‡½æ•°é‡è½½ï¼Ÿ
 å¦‚æžœåœ¨åŒä¸€ä½œç”¨åŸŸä»¥åŠåå­—ç©ºé—´ä¸­å‡ºçŽ°ä¸€ç»„ç›¸åŒåå­—çš„å‡½æ•°ï¼Œè¿™äº›å‡½æ•°å…·æœ‰ä¸åŒçš„å½¢å‚ç±»åž‹æˆ–è€…å½¢å‚ä¸ªæ•°ï¼Œæˆ–æ˜¯
 å¸¦æœ‰ä¸åŒçš„è¿”å›žç±»åž‹ï¼Œé‚£ä¹ˆç§°è¿™ç»„å‡½æ•°ä¸ºé‡è½½å‡½æ•°ã€‚
 */

do {
    func foo() {
        print("æ— å‚æ•°")
    }
    
    func foo(a: Int) {
        print("æœ‰ä¸€ä¸ªæ•´åž‹å‚æ•° \(a)")
    }
    
    func foo(b: Float) {
        print("æœ‰ä¸€ä¸ªæµ®ç‚¹åž‹å‚æ•° \(b)")
    }
    
    foo()
    foo(a: 10)
    foo(b: 20.0)
    
}

// 7. å‡½æ•°ç±»åž‹å’Œå‡½æ•°ç­¾å
/*
 å‡½æ•°ç±»åž‹æ˜¯ç”±å…¶å½¢å‚åˆ—è¡¨ä¸­å„ä¸ªå½¢å‚çš„ç±»åž‹ä¸Žå‡½æ•°è¿”å›žç±»åž‹æž„æˆã€‚
 */

do {
    // è¿”å›žå€¼ä¸º () -> void
    func foo() {
        print("è¿™æ˜¯ä¸€ä¸ªå‡½æ•°")
    }
    
    // è¿”å›žå€¼ä¸º (Int) -> void
    func foo(_ a: Int) {
        print("æœ‰å‚æ•°çš„å‡½æ•° \(a)")
    }
    
    // è¿”å›žå€¼ä¸º (Int, String) -> String
    func foo(a: Int, b: String) -> String {
        return "\(a), \(b)"
    }
    
    let b = foo(_ :)
    b(100)
    
    let a = foo(a: b:)
    let r = a(10, "11")
    print(r)
    
    // å®šä¹‰ä¸€ä¸ªå‡½æ•°magicï¼Œå«æœ‰ä¸€ä¸ªè¾“å…¥è¾“å‡ºå‚æ•° func,ç±»åž‹æ˜¯ (Int) -> Void
    // magicçš„å‡½æ•°çš„ç±»åž‹ä¸º (inout (Int) -> Void) -> Void
    func magic(fun: inout (Int) -> Void) {
        fun = foo(_ :)
    }
    
    var ref = foo(_ :)
    
    magic(fun: &ref)
    ref(200)
    
    let magicRef: (inout (Int) -> Void) -> Void = magic
    magicRef(&ref)
}

/*
 å‡½æ•°ç­¾å
 å‡½æ•°ç­¾åè¿™ä¸ªè¯­æ³•ç‰¹æ€§å…¶å®žå¼•ç”³è‡ªOCçš„æ–¹æ³•ç­¾åã€‚åœ¨swiftè¯­è¨€ä¸­ï¼Œä¸€ä¸ªå‡½æ•°åå¹¶ä¸æ˜¯å”¯ä¸€æ ‡è¯†å½“å‰å‡½æ•°çš„æ ‡å¿—ã€‚
 è€Œæ˜¯éœ€è¦é€šè¿‡ç»“åˆæ¯ä¸ªå½¢å‚æ‰€æŒæœ‰çš„å®žå‚æ ‡ç­¾ã€‚
 */
do {
    func foo() {
        print("foo")
    }
    
    func boo(_ : Void) {
        print("boo")
    }
    
    func moo(a: Int) {
        print("moo")
    }
    
    func poo(a: Int, _: Int, c: Int) {
        print("poo")
    }
    
    //è°ƒç”¨
    foo()
    boo(())
    moo(a: 10)
    poo(a: 100, 20, c: 77)
    
}

do {
    func foo(_ : Void) {
        print("foo Void")
    }
    
    func foo(a: Int) {
        print("foo Int")
    }
    
    func foo(i: Float) {
        print("foo float")
    }
    
    func foo(j: Double) {
        print("foo Double")
    }
    
    func foo(_: Void, _: Int) {
        print("foo Void,Int")
    }
    
    let ref1 = foo(_:) as (()) -> Void
    ref1(())
    
    let ref2 = foo(a:)
    ref2(100)
    
    let ref3 = foo(i:)
    ref3(0.5)
    
    let ref4 = foo(_: _:)
    ref4((), 10)
}

print("\n")
//8.åµŒå¥—å‡½æ•°å®šä¹‰
/*
 swiftè¯­è¨€ä¸­ï¼Œå…è®¸åœ¨å‡½æ•°ä¸­å®šä¹‰ä¸€ä¸ªåµŒå¥—å‡½æ•°ï¼Œè¿™æ˜¯å¾ˆå¤šå…¶ä»–è¯­è¨€å¤šä¸å…·å¤‡çš„ã€‚
 */

do {
    func hello(a: Int) {
        print("value = \(a)")
    }
    
    func outside() -> (Int) -> Void {
        let a = 10
        var b = 20
        
        //å®šä¹‰ä¸€ä¸ªåµŒå¥—å‡½æ•°
        func inner(input: Int) {
            print("inner value = \(input)")
        }
        
        func hello(input: Int) {
            b += a + input
            print("b = \(b)")
        }
        
        //è°ƒç”¨å†…éƒ¨å‡½æ•°
        inner(input: a)
        
        return hello
    }
    
    hello(a: 100)
    let ref = outside()
    ref(5)
    ref(5)
    
    /*
     è¾“å‡ºç»“æžœï¼š
     value = 100
     inner value = 10
     b = 35
     b = 50
     */
}

// swiftçš„åµŒå¥—å‡½æ•°ä¸ä»…å¯ä»¥ç›´æŽ¥å®šä¹‰åœ¨å‡½æ•°ä½“å†…ï¼Œè¿˜å¯ä»¥å®šä¹‰åœ¨è¯­å¥å—ä½œç”¨åŸŸå†…ã€‚
do {
    func foo() {
        print("å¤–é¢çš„foo")
        
        func foo() {
            print("ä¸­å±‚çš„foo")
            
            func foo() {
                print("å†…éƒ¨çš„foo")
            }
            
            //è°ƒç”¨
            foo()
        }
        foo()
    }
    
    foo()
}

/*
 æ‰“å°ç»“æžœï¼š
 å¤–é¢çš„foo
 ä¸­å±‚çš„foo
 å†…éƒ¨çš„foo
 
 ä¸ªäººå»ºè®®ï¼šåœ¨æ²¡æœ‰å¿…è¦çš„æƒ…å†µä¸‹ï¼Œè¿˜æ˜¯ä¸è¦è¿™ä¹ˆå†™ï¼Œå¯èƒ½è‡ªå·±éƒ½ç»™ç»•æ™•äº†ã€‚
 */

//9.ç»Ÿä¸€çš„å‡½æ•°å¼•ç”¨ä½“ç³»
/*
 ä»€ä¹ˆæ˜¯ç»Ÿä¸€çš„å‡½æ•°å¼•ç”¨ï¼Ÿ
 å°±æ˜¯åœ¨swiftä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªå¼•ç”¨å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡é™¤äº†èƒ½å¤Ÿå¼•ç”¨å‡½æ•°ä¹‹å¤–ï¼Œè¿˜èƒ½å¼•ç”¨é—­åŒ…ä»¥åŠç»“æž„ä½“ã€
 æžšä¸¾ã€ç±»ç±»åž‹å¯¹è±¡çš„å®žä¾‹æ–¹æ³•ã€‚
 */
print("\n ------------ç»Ÿä¸€çš„å‡½æ•°å¼•ç”¨ä½“ç³»----------------- ")
do {
    func foo () {
        print("foo")
    }
    
    var ref = foo
    ref()
    // g_blockæ˜¯OCä¸­å®šä¹‰çš„Blockå¯¹è±¡ï¼ŒçŽ°åœ¨æŒ‡å‘fooå‡½æ•°
    g_block = foo
    // è°ƒç”¨OCä¸­çš„CTestï¼Œåˆ¤æ–­g_blockæ˜¯å¦ä¸ºç©º
    CTest()
    /*
     æ‰“å°ç»“æžœ
     foo
     foo
     */
    // è¯´æ˜Žg_blockå·²ç»æŒ‡å‘äº†fooå‡½æ•°
    
    // å®šä¹‰ä¸€ä¸ªbooå‡½æ•°ï¼Œè¿”å›žå€¼æ˜¯() -> Void
    func boo() -> () -> Void {
        var a = 10
        /*
         å®šä¹‰ä¸€ä¸ªåµŒå¥—çš„å‡½æ•°innerï¼Œæ•èŽ·äº†å±€éƒ¨å˜é‡aï¼Œå› æ­¤å®ƒæ˜¯ä¸€ä¸ªé—­åŒ…
         */
        func inner() {
            a += 10
            print("a = \(a)")
        }
        
        return inner
    }
    
    ref = boo()
    ref()
    
    
    g_block = boo()
    CTest()
    /*
     æ‰“å°ç»“æžœï¼š
     a = 20
     a = 20
     */
    
    //ä»Žæ‰“å°ç»“æžœçœ‹ï¼Œg_blockè¿˜æ˜¯ä¸ä¸ºç©ºï¼Œå¹¶ä¸”æŒ‡å‘äº†innerå‡½æ•°
    
    // å®šä¹‰äº†ä¸€ä¸ªç»“æž„ä½“ç±»åž‹
    struct MyStruct {
        
        let a: Int, b: Double
        
        func method () {
            print("a = \(a), b = \(b)")
        }
    }
    
    let obj = MyStruct.init(a: 10, b: 100.0)
    
    //refæŒ‡å‘äº†ä¸€ä¸ªç»“æž„ä½“çš„å®žä¾‹æ–¹æ³•
    ref = obj.method
    ref()
    
    g_block = ref
    CTest()
    
    /*
     ç»“æžœï¼š
     a = 10, b = 100.0
     a = 10, b = 100.0
     */
    
    /*
     å°ç»“ï¼š
     æˆ‘ä»¬å‘çŽ°ï¼Œswiftä¸­çš„ä¸€ä¸ªå‡½æ•°ç±»åž‹å¼•ç”¨å¯ä»¥æŒ‡å‘å‡½æ•°ã€é—­åŒ…ã€å®žä¾‹æ–¹æ³•ä¸‰ç§ç±»åž‹ä¸­çš„ä»»æ„ä¸€ç§ï¼Œè¿™æ˜¯å¾ˆæ–¹ä¾¿ä¹Ÿæ˜¯å¾ˆå…ˆè¿›çš„ã€‚
     æˆ‘ä»¬è·Ÿå…¶ä»–è¯­è¨€åšä¸ªå¯¹æ¯”ï¼š
     C++ï¼šæŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆç±»åž‹ä¸ŽæŒ‡å‘æˆå‘˜å‡½æ•°çš„æŒ‡é’ˆç±»åž‹æ˜¯å®Œå…¨ä¸ä¸€æ ·çš„ã€‚
     OCï¼šæ²¡æœ‰æŒ‡å‘æˆå‘˜å‡½æ•°çš„æŒ‡é’ˆï¼Œè€Œæ˜¯ç»Ÿä¸€ä½¿ç”¨selectoræœºåˆ¶ã€‚
     Javaï¼šä½¿ç”¨æŒ‡å‘æ–¹æ³•çš„å¼•ç”¨æ›´åŠ çš„ç¹çã€‚
     
     æ¯”è¾ƒé—æ†¾çš„æ˜¯ï¼Œå‡½æ•°å¼•ç”¨ä¸èƒ½æ¯”è¾ƒç›¸ç­‰æ€§ï¼Œå› ä¸ºswiftä¼šå¯¹å‡½æ•°ã€é—­åŒ…åšç›¸å…³ä¼˜åŒ–ï¼Œå› æ­¤åœ¨è¿è¡Œæ—¶æ— æ³•ç¡®å®šä¸¤ä¸ªå¼•ç”¨æ˜¯å¦æ˜¯å®Œå…¨ç›¸åŒçš„ã€‚
     */
}

// æŠŠå‡½æ•°çš„å¼•ç”¨æ”¾åœ¨æ•°ç»„ã€å­—å…¸ç­‰å®¹å™¨ä¸­ã€‚
do {
    func foo () {
        print("è¿™æ˜¯ä¸€ä¸ªå‡½æ•°")
    }
    
    let ref = foo
    
    let array = [foo, ref]
    
    // è°ƒç”¨ç¬¬ä¸€ä¸ªå…ƒç´ 
    array[0]()
    // è°ƒç”¨ç¬¬äºŒä¸ªå…ƒç´ 
    array[1]()
    
//    æŠ¥é”™ï¼šBinary operator '==' cannot be applied to two '() -> ()' operands
//    let isequal = foo == ref
//    print("isequal = \(isequal)")
}
